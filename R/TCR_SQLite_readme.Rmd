---
title: "Readme for TCR SQLite database"
output: html_notebook
---

This is an explanation of how to make a RSQLite query to access the IMGT outputs for the TCR sequences. Note these are unformatted. </br>

#Requirements
- Access to rescomp </br>
- Load module R/default </br>
- RSQLite package - preinstalled on rescompe</br>


```{r}
library(RSQLite)
```

#Procedure
For the TCR outputs, these alignments were performed on IMGT High-Vquest using only filtered contigs. </br>
Each of the IMGT output txt are stored as an individual database. Identification of the index hopping correction methods can be queried by matching within the `group` column. </br>

The index hopping correction annotations are as follows:</br>
- default: no index hopping correction </br>
- dehop: index hopping correction by sequencing lane </br>
- dehopsep: index hopping correction by sequencing lane but seperated on TCR and BCR </br>

```{r}
#make connection to database
conn <- dbConnect(RSQLite::SQLite(), "/well/combat/projects/repertoire/imgtout/TCR/TCRdb/TCRIMGT.db") 

#show list of available tables
dbListTables(conn)

#Extract 'dehop' IMGToutput from the Summary.txt output from IMGT
Summary <- RSQLite::dbGetQuery(conn, "SELECT * FROM filtered_Summary WHERE `group` = 'dehop'")

head(Summary)

```

Once extracted, one may convert to a managable format such as a tibble and continue as normal. 


</br>